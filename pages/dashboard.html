<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <title>Особистий кабінет - FixIt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/navbar.css" />
  </head>
  <body class="bg-light">
    <div id="header-container"></div>

    <div class="container py-5 mt-5">
      <div id="client-panel" class="d-none animate-fade-in">
        <div class="row mb-4">
          <div class="col-12">
            <h2
              class="fw-bold text-dark border-start border-5 border-primary ps-3"
            >
              Мій Гараж
            </h2>
            <p class="text-muted ps-3 mb-0">
              Керування автомобілями та історія замовлень
            </p>
          </div>
        </div>

        <div class="row g-4">
          <div class="col-lg-4">
            <div class="card shadow-sm border-0 mb-4 text-center p-3">
              <div class="card-body">
                <div class="mb-3">
                  <span
                    class="d-inline-block p-3 rounded-circle bg-primary bg-opacity-10 text-primary"
                  >
                    <i class="fas fa-user fa-3x"></i>
                  </span>
                </div>
                <h4 id="client-name-display" class="fw-bold mb-1">...</h4>
                <span
                  class="badge bg-success bg-opacity-10 text-success border border-success px-3 rounded-pill"
                  >Клієнт FixIt</span
                >
              </div>
            </div>

            <div class="card shadow-sm border-0">
              <div class="card-header bg-white fw-bold py-3">
                <i class="fas fa-plus text-primary me-2"></i>Додати нове авто
              </div>
              <div class="card-body">
                <form id="add-car-form">
                  <div class="form-floating mb-2">
                    <input
                      type="text"
                      class="form-control"
                      id="car-make"
                      placeholder="Марка"
                      required
                    />
                    <label>Марка</label>
                  </div>
                  <div class="form-floating mb-2">
                    <input
                      type="text"
                      class="form-control"
                      id="car-model"
                      placeholder="Модель"
                      required
                    />
                    <label>Модель</label>
                  </div>
                  <div class="form-floating mb-2">
                    <input
                      type="text"
                      class="form-control"
                      id="car-plate"
                      placeholder="AA0000AA"
                      required
                    />
                    <label>Номер</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      id="car-vin"
                      maxlength="17"
                      placeholder="VIN"
                      required
                    />
                    <label>VIN код (17 симв.)</label>
                  </div>
                  <button type="submit" class="btn btn-dark w-100">
                    Додати авто
                  </button>
                </form>
              </div>
            </div>
          </div>

          <div class="col-lg-8">
            <div id="cars-list" class="row g-3 mb-4"></div>

            <div class="card shadow-sm border-0">
              <div
                class="card-header bg-white fw-bold py-3 d-flex justify-content-between align-items-center"
              >
                <span
                  ><i class="fas fa-history text-primary me-2"></i>Ваші
                  замовлення</span
                >
                <a href="booking.html" class="btn btn-sm btn-primary">
                  <i class="fas fa-plus me-1"></i> Новий запис
                </a>
              </div>
              <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Авто</th>
                      <th>Послуга</th>
                      <th>Дата/Час</th>
                      <th>Ціна</th>
                      <th>Статус</th>
                    </tr>
                  </thead>
                  <tbody id="client-orders-table"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="employee-panel" class="d-none animate-fade-in">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2 class="fw-bold">
            <i class="fas fa-tools text-warning me-2"></i>Панель Управління
          </h2>
        </div>

        <ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
          <li class="nav-item">
            <button
              class="nav-link active fw-bold"
              data-bs-toggle="tab"
              data-bs-target="#orders-tab"
            >
              <i class="fas fa-list me-2"></i>Замовлення
            </button>
          </li>
          <li class="nav-item">
            <button
              class="nav-link fw-bold"
              data-bs-toggle="tab"
              data-bs-target="#warehouse-tab"
            >
              <i class="fas fa-boxes me-2"></i>Склад запчастин
            </button>
          </li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane fade show active" id="orders-tab">
            <div class="card shadow-sm border-0">
              <div class="card-body p-0">
                <table
                  class="table table-striped table-hover mb-0 align-middle"
                >
                  <thead class="table-dark">
                    <tr>
                      <th>ID</th>
                      <th>Авто / VIN</th>
                      <th>Послуга</th>
                      <th>Дата</th>
                      <th>Статус</th>
                      <th>Дії</th>
                    </tr>
                  </thead>
                  <tbody id="employee-orders-table"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="tab-pane fade" id="warehouse-tab">
            <div class="row">
              <div class="col-md-4">
                <div class="card shadow-sm border-0 mb-3">
                  <div class="card-header bg-white fw-bold">
                    Нова запчастина
                  </div>
                  <div class="card-body">
                    <form id="add-part-form">
                      <div class="mb-2">
                        <label>Назва</label
                        ><input
                          type="text"
                          id="part-name"
                          class="form-control"
                          required
                        />
                      </div>
                      <div class="mb-2">
                        <label>Тип</label>
                        <select id="part-type" class="form-select">
                          <option value="original">Оригінал</option>
                          <option value="replica">Репліка</option>
                        </select>
                      </div>
                      <div class="row mb-3">
                        <div class="col">
                          <label>Ціна</label
                          ><input
                            type="number"
                            id="part-price"
                            class="form-control"
                            required
                          />
                        </div>
                        <div class="col">
                          <label>Кількість</label
                          ><input
                            type="number"
                            id="part-qty"
                            class="form-control"
                            required
                          />
                        </div>
                      </div>
                      <button type="submit" class="btn btn-success w-100">
                        Додати
                      </button>
                    </form>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="card shadow-sm border-0">
                  <div class="card-body p-0">
                    <table class="table table-hover mb-0">
                      <thead class="table-secondary">
                        <tr>
                          <th>Назва</th>
                          <th>Тип</th>
                          <th>Ціна</th>
                          <th>Кількість</th>
                        </tr>
                      </thead>
                      <tbody id="warehouse-table"></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="manageOrderModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-dark text-white">
            <h5 class="modal-title">Деталі ремонту</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-6 border-end">
                <h6 class="text-muted">Інформація</h6>
                <p class="mb-1">
                  <strong>Авто:</strong> <span id="modal-car-name"></span>
                </p>
                <p class="mb-1">
                  <strong>Послуга:</strong> <span id="modal-service"></span>
                </p>
                <hr />
                <label class="form-label fw-bold">Вартість робіт (грн):</label>
                <input
                  type="number"
                  id="modal-work-price"
                  class="form-control mb-3"
                  placeholder="0"
                />

                <label class="form-label fw-bold">Статус:</label>
                <select id="modal-status" class="form-select">
                  <option value="Новий">Новий</option>
                  <option value="В роботі">В роботі</option>
                  <option value="Виконано">Виконано</option>
                </select>
              </div>

              <div class="col-md-6">
                <h6 class="text-muted">Матеріали</h6>
                <div class="input-group mb-2">
                  <select id="modal-part-select" class="form-select"></select>
                  <button
                    class="btn btn-outline-primary"
                    id="btn-add-part-to-order"
                  >
                    Додати
                  </button>
                </div>
                <ul
                  id="modal-parts-list"
                  class="list-group list-group-flush small mb-3 border rounded"
                  style="max-height: 150px; overflow-y: auto"
                ></ul>
                <div class="d-flex justify-content-between fw-bold fs-5 mt-4">
                  <span>Всього:</span>
                  <span id="modal-total-price">0 грн</span>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Закрити
            </button>
            <button type="button" class="btn btn-success" id="btn-save-order">
              Зберегти зміни
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/services/db.js"></script>
    <script src="../js/components/header.js"></script>
    <script src="../js/dashboard.js"></script>
  </body>
</html>
